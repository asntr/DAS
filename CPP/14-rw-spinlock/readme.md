# Read-write spinlock

В этой задаче вам предстоит реализовать spinlock, который поддерживает конкурентные чтения. При этом блокировка на запись должна работать как и с обычным spinlock, т.е. должно быть эксклюзивное владение.

Интерфейс приведен в файле `rw_spinlock.h`.

Идея алгоритма:

1. Создается атомарная переменная.
2. Внутри атомарной переменной первый младший бит выделяется для флага записи.
3. Остальные биты, начиная со второго, - это счетчик читателей.
4. Для `lockRead` должен соблюдаться инвариант: младший бит не должен быть равен 1.
5. Для `lockWrite` должен соблюдаться инвариант: младший бит не должен быть равен 1 + счетчик читателей должен быть равен 0.

### Ограничения
Класс std::mutex запрещен в этой задаче. Это проверяется автоматически.

Поскольку TSAN плохо работает с атомиками, он отключен в этой задаче, и тесты с ним не запускаются.

### Лидерборд
Правила оценивания обычные (см. [инструкцию](https://gitlab.com/shad-cpp-course/tasks/blob/master/docs/setup.md)).